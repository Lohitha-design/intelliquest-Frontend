{"ast":null,"code":"import _objectSpread from\"C:/Mini Project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import'./Questions.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function Questions(){const[questions,setQuestions]=useState([]);const[userAnswers,setUserAnswers]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState('');const query=new URLSearchParams(useLocation().search);const role=query.get('role');const level=query.get('level');const navigate=useNavigate();useEffect(()=>{const fetchQuestions=async()=>{try{const res=await fetch(\"http://localhost:5000/api/questions/quiz?role=\".concat(role,\"&level=\").concat(level,\"&count=10\"));const data=await res.json();if(Array.isArray(data)){setQuestions(data);}else{setQuestions([]);setError('Unexpected response format. No questions found.');}}catch(err){console.error('Fetch error:',err);setError('Failed to load questions. Please try again later.');}finally{setLoading(false);}};fetchQuestions();},[role,level]);const handleOptionClick=(qIndex,optIndex)=>{setUserAnswers(prev=>_objectSpread(_objectSpread({},prev),{},{[qIndex]:optIndex}));};const handleSubmit=()=>{let score=0;questions.forEach((q,i)=>{if(userAnswers[i]===q.answerIndex)score++;});navigate('/score',{state:{role,level,score,total:questions.length,userAnswers,questions}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"questions-wrapper\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[role,\" Test (\",level,\")\"]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading questions...\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),!loading&&!error&&questions.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No questions available for this role and level yet.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please check back later or try a different combination.\"})]}),!loading&&!error&&questions.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[questions.map((q,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"question-card\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Q\",i+1,\":\"]}),\" \",q.question]}),/*#__PURE__*/_jsx(\"ul\",{children:q.options.map((opt,idx)=>/*#__PURE__*/_jsx(\"li\",{className:userAnswers[i]===idx?'selected':'',onClick:()=>handleOptionClick(i,idx),children:opt},idx))})]},i)),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:handleSubmit,disabled:Object.keys(userAnswers).length<questions.length,children:\"Submit Quiz\"})]})]});}export default Questions;","map":{"version":3,"names":["useEffect","useState","useLocation","useNavigate","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Questions","questions","setQuestions","userAnswers","setUserAnswers","loading","setLoading","error","setError","query","URLSearchParams","search","role","get","level","navigate","fetchQuestions","res","fetch","concat","data","json","Array","isArray","err","console","handleOptionClick","qIndex","optIndex","prev","_objectSpread","handleSubmit","score","forEach","q","i","answerIndex","state","total","length","className","children","style","color","map","question","options","opt","idx","onClick","disabled","Object","keys"],"sources":["C:/Mini Project/client/src/pages/Questions.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport './Questions.css';\r\n\r\nfunction Questions() {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [userAnswers, setUserAnswers] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const query = new URLSearchParams(useLocation().search);\r\n  const role = query.get('role');\r\n  const level = query.get('level');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchQuestions = async () => {\r\n      try {\r\n        const res = await fetch(\r\n          `http://localhost:5000/api/questions/quiz?role=${role}&level=${level}&count=10`\r\n        );\r\n        const data = await res.json();\r\n\r\n        if (Array.isArray(data)) {\r\n          setQuestions(data);\r\n        } else {\r\n          setQuestions([]);\r\n          setError('Unexpected response format. No questions found.');\r\n        }\r\n      } catch (err) {\r\n        console.error('Fetch error:', err);\r\n        setError('Failed to load questions. Please try again later.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchQuestions();\r\n  }, [role, level]);\r\n\r\n  const handleOptionClick = (qIndex, optIndex) => {\r\n    setUserAnswers(prev => ({ ...prev, [qIndex]: optIndex }));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    let score = 0;\r\n    questions.forEach((q, i) => {\r\n      if (userAnswers[i] === q.answerIndex) score++;\r\n    });\r\n\r\n    navigate('/score', {\r\n      state: {\r\n        role,\r\n        level,\r\n        score,\r\n        total: questions.length,\r\n        userAnswers,\r\n        questions\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"questions-wrapper\">\r\n      <h2>{role} Test ({level})</h2>\r\n\r\n      {loading && <p>Loading questions...</p>}\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n      {!loading && !error && questions.length === 0 && (\r\n        <div className=\"empty-state\">\r\n          <p>No questions available for this role and level yet.</p>\r\n          <p>Please check back later or try a different combination.</p>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && questions.length > 0 && (\r\n        <>\r\n          {questions.map((q, i) => (\r\n            <div key={i} className=\"question-card\">\r\n              <p><strong>Q{i + 1}:</strong> {q.question}</p>\r\n              <ul>\r\n                {q.options.map((opt, idx) => (\r\n                  <li\r\n                    key={idx}\r\n                    className={userAnswers[i] === idx ? 'selected' : ''}\r\n                    onClick={() => handleOptionClick(i, idx)}\r\n                  >\r\n                    {opt}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          ))}\r\n\r\n          <button\r\n            className=\"submit-button\"\r\n            onClick={handleSubmit}\r\n            disabled={Object.keys(userAnswers).length < questions.length}\r\n          >\r\n            Submit Quiz\r\n          </button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Questions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}