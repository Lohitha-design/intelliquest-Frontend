{"ast":null,"code":"import{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import'./InterviewSession.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function InterviewSession(){const query=new URLSearchParams(useLocation().search);const initialRole=query.get('role');const navigate=useNavigate();const[role,setRole]=useState(initialRole||'');const[questions,setQuestions]=useState([]);const[currentIndex,setCurrentIndex]=useState(0);const[userAnswer,setUserAnswer]=useState('');const[relevance,setRelevance]=useState(null);const[responses,setResponses]=useState([]);const[sessionComplete,setSessionComplete]=useState(false);const[startSession,setStartSession]=useState(false);const roles=['Data Analyst','ML Engineer','Gen AI Engineer','Frontend Developer','Backend Developer','Cybersecurity Analyst'];useEffect(()=>{if(!role||!startSession)return;const fetchQuestions=async()=>{try{const res=await fetch(\"http://localhost:5000/api/interview/\".concat(role));const data=await res.json();setQuestions(data);}catch(err){console.error('Error fetching interview questions:',err);}};fetchQuestions();},[role,startSession]);const calculateRelevance=(user,correct)=>{const userWords=user.toLowerCase().split(/\\W+/);const correctWords=correct.toLowerCase().split(/\\W+/);const matchCount=userWords.filter(word=>correctWords.includes(word)).length;return Math.round(matchCount/correctWords.length*100);};const handleSubmit=()=>{const currentQuestion=questions[currentIndex];const relevanceScore=calculateRelevance(userAnswer,currentQuestion.answer);const newResponse={role,question:currentQuestion.question,userAnswer,correctAnswer:currentQuestion.answer,relevance:relevanceScore};const updatedResponses=[...responses,newResponse];setResponses(updatedResponses);localStorage.setItem('interviewResponses',JSON.stringify(updatedResponses));setRelevance(relevanceScore);setUserAnswer('');if(currentIndex<questions.length-1){setTimeout(()=>{setCurrentIndex(prev=>prev+1);setRelevance(null);},2000);}else{setSessionComplete(true);}};useEffect(()=>{if(sessionComplete&&responses.length>0){fetch('http://localhost:5000/api/performance',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({role,responses})}).then(res=>res.json()).then(data=>console.log('Responses saved:',data)).catch(err=>console.error('Save error:',err));}},[sessionComplete,responses,role]);const handleRoleSelect=e=>{setRole(e.target.value);};const handleStartInterview=()=>{navigate(\"/interview?role=\".concat(encodeURIComponent(role)));setStartSession(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"interview-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Interview Session\"}),!startSession?/*#__PURE__*/_jsxs(\"div\",{className:\"role-selector\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Please select a role to begin:\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:handleRoleSelect,value:role,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select a role\"}),roles.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r},r))]}),role&&/*#__PURE__*/_jsx(\"button\",{className:\"start-button\",onClick:handleStartInterview,children:\"Start Interview\"})]}):questions.length>0&&!sessionComplete?/*#__PURE__*/_jsxs(\"div\",{className:\"interview-card\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Q\",currentIndex+1,\":\"]}),\" \",questions[currentIndex].question]}),/*#__PURE__*/_jsx(\"textarea\",{value:userAnswer,onChange:e=>setUserAnswer(e.target.value),placeholder:\"Type your answer here...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:!userAnswer.trim(),children:\"Submit Answer\"}),relevance!==null&&/*#__PURE__*/_jsxs(\"p\",{className:\"relevance-score\",children:[\"Relevance: \",relevance,\"%\"]})]}):questions.length===0&&role?/*#__PURE__*/_jsxs(\"p\",{children:[\"Loading questions for \",role,\"...\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"interview-complete\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u2705 Interview session complete!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your responses have been saved for review.\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-button\",onClick:()=>navigate('/dashboard'),children:\"Back to Dashboard\"})]});}export default InterviewSession;","map":{"version":3,"names":["useEffect","useState","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","InterviewSession","query","URLSearchParams","search","initialRole","get","navigate","role","setRole","questions","setQuestions","currentIndex","setCurrentIndex","userAnswer","setUserAnswer","relevance","setRelevance","responses","setResponses","sessionComplete","setSessionComplete","startSession","setStartSession","roles","fetchQuestions","res","fetch","concat","data","json","err","console","error","calculateRelevance","user","correct","userWords","toLowerCase","split","correctWords","matchCount","filter","word","includes","length","Math","round","handleSubmit","currentQuestion","relevanceScore","answer","newResponse","question","correctAnswer","updatedResponses","localStorage","setItem","JSON","stringify","setTimeout","prev","method","headers","body","then","log","catch","handleRoleSelect","e","target","value","handleStartInterview","encodeURIComponent","className","children","onChange","disabled","map","r","onClick","placeholder","trim"],"sources":["C:/Mini Project/client/src/pages/InterviewSession.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport './InterviewSession.css';\r\n\r\nfunction InterviewSession() {\r\n  const query = new URLSearchParams(useLocation().search);\r\n  const initialRole = query.get('role');\r\n  const navigate = useNavigate();\r\n\r\n  const [role, setRole] = useState(initialRole || '');\r\n  const [questions, setQuestions] = useState([]);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [userAnswer, setUserAnswer] = useState('');\r\n  const [relevance, setRelevance] = useState(null);\r\n  const [responses, setResponses] = useState([]);\r\n  const [sessionComplete, setSessionComplete] = useState(false);\r\n  const [startSession, setStartSession] = useState(false);\r\n\r\n  const roles = [\r\n    'Data Analyst',\r\n    'ML Engineer',\r\n    'Gen AI Engineer',\r\n    'Frontend Developer',\r\n    'Backend Developer',\r\n    'Cybersecurity Analyst'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (!role || !startSession) return;\r\n\r\n    const fetchQuestions = async () => {\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/api/interview/${role}`);\r\n        const data = await res.json();\r\n        setQuestions(data);\r\n      } catch (err) {\r\n        console.error('Error fetching interview questions:', err);\r\n      }\r\n    };\r\n\r\n    fetchQuestions();\r\n  }, [role, startSession]);\r\n\r\n  const calculateRelevance = (user, correct) => {\r\n    const userWords = user.toLowerCase().split(/\\W+/);\r\n    const correctWords = correct.toLowerCase().split(/\\W+/);\r\n    const matchCount = userWords.filter(word => correctWords.includes(word)).length;\r\n    return Math.round((matchCount / correctWords.length) * 100);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    const currentQuestion = questions[currentIndex];\r\n    const relevanceScore = calculateRelevance(userAnswer, currentQuestion.answer);\r\n\r\n    const newResponse = {\r\n      role,\r\n      question: currentQuestion.question,\r\n      userAnswer,\r\n      correctAnswer: currentQuestion.answer,\r\n      relevance: relevanceScore\r\n    };\r\n\r\n    const updatedResponses = [...responses, newResponse];\r\n    setResponses(updatedResponses);\r\n    localStorage.setItem('interviewResponses', JSON.stringify(updatedResponses));\r\n\r\n    setRelevance(relevanceScore);\r\n    setUserAnswer('');\r\n\r\n    if (currentIndex < questions.length - 1) {\r\n      setTimeout(() => {\r\n        setCurrentIndex(prev => prev + 1);\r\n        setRelevance(null);\r\n      }, 2000);\r\n    } else {\r\n      setSessionComplete(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (sessionComplete && responses.length > 0) {\r\n      fetch('http://localhost:5000/api/performance', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ role, responses })\r\n      })\r\n        .then(res => res.json())\r\n        .then(data => console.log('Responses saved:', data))\r\n        .catch(err => console.error('Save error:', err));\r\n    }\r\n  }, [sessionComplete, responses, role]);\r\n\r\n  const handleRoleSelect = e => {\r\n    setRole(e.target.value);\r\n  };\r\n\r\n  const handleStartInterview = () => {\r\n    navigate(`/interview?role=${encodeURIComponent(role)}`);\r\n    setStartSession(true);\r\n  };\r\n\r\n return (\r\n  <div className=\"interview-wrapper\">\r\n    <h2>Interview Session</h2>\r\n\r\n    {!startSession ? (\r\n      <div className=\"role-selector\">\r\n        <p>Please select a role to begin:</p>\r\n        <select onChange={handleRoleSelect} value={role}>\r\n          <option value=\"\" disabled>Select a role</option>\r\n          {roles.map(r => (\r\n            <option key={r} value={r}>{r}</option>\r\n          ))}\r\n        </select>\r\n\r\n        {role && (\r\n          <button className=\"start-button\" onClick={handleStartInterview}>\r\n            Start Interview\r\n          </button>\r\n        )}\r\n      </div>\r\n    ) : questions.length > 0 && !sessionComplete ? (\r\n      <div className=\"interview-card\">\r\n        <p><strong>Q{currentIndex + 1}:</strong> {questions[currentIndex].question}</p>\r\n\r\n        <textarea\r\n          value={userAnswer}\r\n          onChange={e => setUserAnswer(e.target.value)}\r\n          placeholder=\"Type your answer here...\"\r\n        />\r\n\r\n        <button onClick={handleSubmit} disabled={!userAnswer.trim()}>\r\n          Submit Answer\r\n        </button>\r\n\r\n        {relevance !== null && (\r\n          <p className=\"relevance-score\">Relevance: {relevance}%</p>\r\n        )}\r\n      </div>\r\n    ) : questions.length === 0 && role ? (\r\n      <p>Loading questions for {role}...</p>\r\n    ) : (\r\n      <div className=\"interview-complete\">\r\n        <p>âœ… Interview session complete!</p>\r\n        <p>Your responses have been saved for review.</p>\r\n      </div>\r\n    )}\r\n\r\n    {/* Back to Dashboard button always visible */}\r\n    <button className=\"dashboard-button\" onClick={() => navigate('/dashboard')}>\r\n      Back to Dashboard\r\n    </button>\r\n  </div>\r\n);\r\n}\r\n\r\nexport default InterviewSession;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}